# 잡과 디퍼드

## 결과가 없는 비동기 함수

- 완료 여부를 모니터링할 수 있지만 결과를 갖지 않는 백그라운드 작업이 이런 유형

## 결과를 반환하는 비동기 함수

- 웹 서비스에서 정보를 가져올 때 거의 대부분 해당 함수를 사용해 정보를 반환하고자 할 것이다.

# 잡

- 한 번 시작된 작업은 예외가 발생하지 않는한 대기하지 않는다. → launch를 사용해 잡을 생성하는 방법이 가장 일반적이다.

## 예외 처리

- 기본적으로 잡 내부에서 발생하는 예외는 잡을 생성한 곡까지 전파된다.

## 라이프사이클

- 생성 : 존재하지만 아직 실행되지 않는 잡
    - launch나 job을 사용해 생성될 때 자동으로 시작된다. coroutineStart.LAZY를 사용하면 자동으로 시작되지 않게 할 수 있다.
- 활성 : 실행 중인 잡. 일시 중단된 잡도 활성으로 간주된다.
    - start 잡이 완료될 때까지 기다리지 않고 잡을 시작하는 반면 join은 잡이 완료될 때까지 실행을 일시 중단한다는 점.
    - 시작된 모든 잡은 활성 상태이며 실행이 완료되거나 취소가 요청될 때까지 활성 상태가 된다.
- 완료 : 잡이 더 이상 실행되지 않는 경우
    - 실행이 중지된 잡은 완료됨으로 간주된다. 이는 실행이 정상적으로 종료됐거나 취소됐는지 또는 예외 때문에 종료됐는지 여부에 관계없이 적용된다. 이러한 이유로 취소된 항목은 완료된 항목의 하위 항목으로 간주되기도 한다.
- 취소 중 : 실행 중인 잡에서 cancel이 호출된면 취소가 완료될 때까지 시간이 걸리기도 한다. 이것은 활성과 취소 사이의 중간 상태
    - cancelAndJoin 함수는 실행을 취소할 뿐만 아니라 취소가 완료될 때까지 현재 코루틴을 일시 중단한다.
- 취소 됨 : 취소로 인해 실행이 완료된 잡. 취소된 잡도 완료로 간주될 수 있다.

# 디퍼드

- 디퍼드는 결과를 갖는 비동기 작업을 수행하기 위해 잡을 확장한다.

## 예외 처리

- 순수한 잡과 달리 디퍼드는 처리되지 않은 예외를 자동으로 전파하지 않는다.
- await을 이용하여 예외를 전파
- try catch 블록을 통하여 전파된 예외를 처리할 수 있다.

## 상태는 한 방향으로만 이동

- 일단 잡이 특정 상태에 도달하면 이전 상태로 되돌아가지 않는다.(완료된 잡을 다시 스타트하여도 의미 없음)